<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lvluplife – Start (Dreamy Whisper Fixed)</title>

  <style>
    /* =========================================================
       (1) KONTROLLPANEL – färger, tider & känsla
       ========================================================= */
    :root{
      /* Bas */
      --bg: #0a0a0a;
      --fg: #ffffff;

      /* Rubrik + layout */
      --title-glow: rgba(0,255,200,.4);
      --title-size-min: 2.5rem;
      --title-size-fluid: 8vw;
      --title-size-max: 6rem;
      --title-bottom-gap: 18px;

      /* Streck + subtext */
      --accent: rgba(255,255,255,.35);
      --divider-width: 300px;
      --divider-height: 2px;     --divider-opacity: .55;
      --divider-bottom-gap: 16px;
      --subtext-size: 1rem;      --subtext-opacity: .65;
      --subtext-letterspace: .05em;
      --subtext-bottom-gap: 28px;

      /* Knapp */
      --btn-text: #ffffff;
      --btn-grad-from: #00f0ff;
      --btn-grad-to:   #0077ff;
      --btn-radius: 12px;
      --btn-pad-y: 18px;
      --btn-pad-x: 52px;
      --btn-letterspace: 2px;
      --btn-fontsize: 1.2rem;
      --btn-shadow: 0 0 25px rgba(0,255,255,.35);

      /* Hint */
      --hint-size: .95rem;  --hint-opacity: .6; --hint-top-gap: 16px;

      /* ============ DRÖMMIG PORTAL (på klick) ============ */
      --dream-total-ms: 1800;       /* total sekvens (ms) */
      --show-delay-frac: 0.30;      /* när viskningen börjar (andel av total) */
      --hide-before-end-ms: 520;    /* text börjar tona ut före slut */

      /* Veil (garanterat sken) */
      --veil-peak: 0.85;            /* topp-opacitet på slöjan */
      --veil-ease: cubic-bezier(.23,1,.32,1);

      /* Dimtintar (varma, mjuka) + boost */
      --dream-boost: 1.0;           /* 1.0–1.4 för mer glow */
      --mist1: rgba(255,255,250,0.90);
      --mist2: rgba(245,255,250,0.65);
      --mist3: rgba(255,245,255,0.45);
      --mist-ease: cubic-bezier(.22,.55,.1,1);
      --mist-blur: 18px;

      /* Viskningstext */
      --whisper-text: "";
      --whisper-size: clamp(18px, 3.2vw, 28px);
      --whisper-color: rgba(0,0,0,0.78);
      --whisper-weight: 600;
      --whisper-letter: .08em;
      --whisper-in-ms: 900;
      --whisper-out-ms: 620;
      --whisper-char-translate: 8px;
      --char-stagger-min: 16;     /* ms */
      --char-stagger-max: 60;     /* ms */
      --whisper-breath-amp: .12;
    }

    /* =========================================================
       (2) BASLAYOUT
       ========================================================= */
    *{margin:0;padding:0;box-sizing:border-box}
    html,body{height:100%}
    body{
      background: var(--bg); color: var(--fg);
      font-family: "Poppins","Helvetica Neue",Arial,sans-serif;
      display:flex; flex-direction:column; align-items:center;
      justify-content:flex-start; overflow:hidden; padding-top: 12vh;
    }
    main{ width:min(920px,92vw); text-align:center; }

    /* =========================================================
       (3) RUBRIK + STRECK + SUBTEXT
       ========================================================= */
    h1{
      font-size: clamp(var(--title-size-min), var(--title-size-fluid), var(--title-size-max));
      font-weight: 800; letter-spacing: .08em; text-transform: uppercase;
      margin-bottom: var(--title-bottom-gap);
      text-shadow: 0 0 25px var(--title-glow);
    }
    .divider{
      width: var(--divider-width); height: var(--divider-height);
      background: var(--accent); margin: 0 auto var(--divider-bottom-gap);
      border-radius: 1px; opacity: var(--divider-opacity);
    }
    .subtext{
      font-size: var(--subtext-size); opacity: var(--subtext-opacity);
      letter-spacing: var(--subtext-letterspace); margin-bottom: var(--subtext-bottom-gap);
    }

    /* =========================================================
       (4) KNAPP + HINT
       ========================================================= */
    .start-btn{
      display:inline-block; padding: var(--btn-pad-y) var(--btn-pad-x);
      color: var(--btn-text);
      background: linear-gradient(90deg, var(--btn-grad-from), var(--btn-grad-to));
      border: none; border-radius: var(--btn-radius); cursor: pointer;
      text-transform: uppercase; font-weight: 700; letter-spacing: var(--btn-letterspace);
      font-size: var(--btn-fontsize); box-shadow: var(--btn-shadow);
      transition: transform .25s ease, box-shadow .25s ease, filter .25s ease;
      text-decoration:none; z-index:2;
    }
    .start-btn:hover{ transform: scale(1.05); filter:saturate(1.05) }
    .start-btn:active{ transform: scale(.985) }
    .start-btn:focus-visible{ outline: 2px solid rgba(0,255,200,.6); outline-offset: 3px; }
    .hint{ margin-top: var(--hint-top-gap); font-size: var(--hint-size); opacity: var(--hint-opacity); letter-spacing: .05em; }

    /* =========================================================
       (5) DREAM OVERLAY (veil + mist + whisper)
       ========================================================= */
    .dream-overlay{ position: fixed; inset: 0; z-index: 9998; pointer-events: none; display:grid; place-items:center; }

    /* Veil – Garanterat sken (radial vit slöja) */
    .veil{
      position:absolute; inset:-10vh -10vw;
      background:
        radial-gradient(90vmax 90vmax at 50% 50%, rgba(255,255,255,var(--veil-peak)) 0%, rgba(255,255,255,0.55) 30%, rgba(255,255,255,0.25) 55%, rgba(255,255,255,0) 80%);
      opacity: 0; transform: scale(.96);
      animation: veilPulse calc(var(--dream-total-ms)*1ms) var(--veil-ease) forwards;
      filter: blur(4px);
    }
    @keyframes veilPulse{
      0%   { opacity: 0; transform: scale(.96); }
      35%  { opacity: var(--veil-peak); transform: scale(1.02); }
      70%  { opacity: .65; transform: scale(1.06); }
      100% { opacity: 0; transform: scale(1.10); }
    }

    /* Tre dimlager för djup (ovanpå veil) */
    .mist{
      position:absolute; inset:-15vh -15vw;
      filter: blur(calc(var(--mist-blur) * var(--dream-boost)));
      opacity: 0; transform: scale(.95);
      mix-blend-mode: screen;
    }
    .mist-1{
      background:
        radial-gradient(60vmax 60vmax at 40% 45%, var(--mist1) 0%, transparent 60%),
        radial-gradient(40vmax 40vmax at 70% 60%, var(--mist2) 0%, transparent 70%);
      animation:
        mistRise   calc(var(--dream-total-ms)*1ms) var(--mist-ease) forwards,
        breathe    calc(var(--dream-total-ms)*1ms) ease-in-out infinite;
    }
    .mist-2{
      background:
        radial-gradient(70vmax 70vmax at 60% 35%, var(--mist2) 0%, transparent 65%),
        radial-gradient(50vmax 50vmax at 30% 65%, var(--mist3) 0%, transparent 75%);
      animation:
        mistDrift  calc(var(--dream-total-ms)*1ms) var(--mist-ease) forwards,
        breatheSlow calc(var(--dream-total-ms)*1ms) ease-in-out infinite;
    }
    .mist-3{
      background:
        radial-gradient(55vmax 55vmax at 50% 50%, var(--mist1) 0%, transparent 60%);
      animation:
        mistPulse  calc(var(--dream-total-ms)*1ms) var(--mist-ease) forwards,
        breathe    calc(var(--dream-total-ms)*1ms) ease-in-out infinite;
    }

    @keyframes mistRise{
      0%   { opacity: 0; transform: scale(.92) translateY(12px); }
      38%  { opacity: .95; transform: scale(1.01) translateY(0); }
      100% { opacity: 0; transform: scale(1.06) translateY(-8px); }
    }
    @keyframes mistDrift{
      0%   { opacity: 0; transform: scale(.94) translateX(-12px); }
      32%  { opacity: .80; transform: scale(1.00) translateX(0); }
      100% { opacity: 0; transform: scale(1.07) translateX(10px); }
    }
    @keyframes mistPulse{
      0%   { opacity: 0; transform: scale(.90); }
      52%  { opacity: .70; transform: scale(1.02); }
      100% { opacity: 0; transform: scale(1.07); }
    }
    @keyframes breathe{
      0%,100% { filter: blur(calc(var(--mist-blur) * var(--dream-boost))); }
      50%     { filter: blur(calc((var(--mist-blur) + 6px) * var(--dream-boost))); }
    }
    @keyframes breatheSlow{
      0%,100% { opacity: .95; }
      50%     { opacity: calc(.95 - var(--whisper-breath-amp)); }
    }

    /* Whisper – låg kontrast + bokstavsvåg */
    .whisper{
      position:absolute; inset:0; z-index:9999; display:grid; place-items:center;
      pointer-events:none; opacity:0; padding:0 16px; text-align:center; mix-blend-mode:multiply;
      transition: opacity calc(var(--whisper-in-ms)*1ms) var(--mist-ease);
    }
    .whisper.show{ opacity:1; }
    .whisper.hide{ opacity:0; transition: opacity calc(var(--whisper-out-ms)*1ms) var(--mist-ease); }
    .whisper .line{
      font: var(--whisper-weight) var(--whisper-size)/1.15 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
      letter-spacing: var(--whisper-letter); color: var(--whisper-color);
      white-space: pre-wrap;
    }
    .char{
      display:inline-block; opacity:0; transform: translateY(var(--whisper-char-translate));
      filter: blur(2px);
      transition: opacity .6s var(--mist-ease), transform .6s var(--mist-ease), filter .6s var(--mist-ease);
    }
    .char.on{ opacity:1; transform: translateY(0); filter: blur(0); }

    /* Om användaren har "reduce motion", kör åtminstone ett mjukt veil */
    @media (prefers-reduced-motion: reduce){
      .mist{ animation: none !important; }
      .whisper{ transition: none !important; }
      .veil{ animation: veilPulse calc(var(--dream-total-ms)*1ms) linear forwards; }
    }
  </style>
</head>
<body>
  <main>
    <!-- RUBRIK + STRECK -->
    <h1>Lvluplife</h1>
    <div class="divider"></div>

    <!-- SUBTEXT -->
    <p class="subtext">This is a tool for the one who needs the HP</p>

    <!-- KNAPP -->
    <a id="startBtn" class="start-btn" href="journey.html" role="button">Start your journey</a>

    <!-- HINT -->
    <p class="hint"></p>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const NEXT_URL = 'journey.html';
      const root = getComputedStyle(document.documentElement);

      const TOTAL = +(root.getPropertyValue('--dream-total-ms').trim() || 1800);
      const SHOW_FRAC = +(root.getPropertyValue('--show-delay-frac').trim() || 0.30);
      const HIDE_BEFORE = +(root.getPropertyValue('--hide-before-end-ms').trim() || 520);

      const SHOW_MS = Math.round(TOTAL * SHOW_FRAC);

      const startBtn = document.getElementById('startBtn');
      let clicked = false;
      let timers = [];

      function t(fn, ms){ const id = setTimeout(fn, ms); timers.push(id); return id; }
      function clearAll(){ timers.forEach(clearTimeout); timers = []; }

      function makeOverlay(){
        const wrap = document.createElement('div');
        wrap.className = 'dream-overlay';
        wrap.innerHTML = `
          <div class="veil"></div>
          <div class="mist mist-1"></div>
          <div class="mist mist-2"></div>
          <div class="mist mist-3"></div>
          <div class="whisper" aria-hidden="true"><div class="line"></div></div>
        `;
        document.body.appendChild(wrap);
        return wrap;
      }

      function setWhisper(wrap){
        const whisper = wrap.querySelector('.whisper');
        const line = whisper.querySelector('.line');
        let txt = getComputedStyle(document.documentElement).getPropertyValue('--whisper-text').trim();
        txt = txt.replace(/^["']|["']$/g,'');
        if(!txt) txt = 'Do you have what it takes?';
        // skapa chars
        line.innerHTML = '';
        for (const ch of txt){
          const span = document.createElement('span');
          span.className = 'char';
          span.textContent = ch;
          line.appendChild(span);
        }
        return whisper;
      }

      function whisperWave(whisper){
        const chars = Array.from(whisper.querySelectorAll('.char'));
        if (!chars.length) return;
        const css = getComputedStyle(document.documentElement);
        const min = +(css.getPropertyValue('--char-stagger-min').trim() || 16);
        const max = +(css.getPropertyValue('--char-stagger-max').trim() || 60);
        let tacc = 0;
        chars.forEach((span) => {
          const jitter = Math.floor(min + Math.random() * (max - min));
          tacc += jitter;
          t(()=> span.classList.add('on'), tacc);
        });
      }

      function enterDream(e){
        e.preventDefault();
        if (clicked) return;
        clicked = true;

        const overlay = makeOverlay();
        const whisper = setWhisper(overlay);

        // show whisper efter en bit
        t(() => { whisper.classList.add('show'); whisperWave(whisper); }, SHOW_MS);

        // hide whisper lite innan slut
        const hideAt = Math.max(0, TOTAL - HIDE_BEFORE);
        t(() => whisper.classList.add('hide'), hideAt);

        // navigera när sekvensen är klar
        t(() => { window.location.href = NEXT_URL; }, TOTAL);

        // städa lite efteråt
        t(() => { overlay.remove(); clearAll(); }, TOTAL + 250);
      }

      startBtn.addEventListener('click', enterDream);
      startBtn.addEventListener('keydown', (e)=>{
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); enterDream(e); }
      });

      window.addEventListener('pageshow', () => { clicked = false; clearAll(); });
    });
  </script>
</body>
</html>
